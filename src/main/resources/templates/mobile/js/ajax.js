function loadJs(a) { -1 != a.indexOf("social_nav") ? footerKefu() : -1 != a.indexOf("j-slide-not") || -1 != a.indexOf("j-slide-np") ? scrollBar() : -1 != a.indexOf("j-slide-auto") ? scrollBarAuto() : -1 != a.indexOf("clear_word") ? (clearWordHandle(), $(".u-in").unbind().bind("click", searchKeyWord)) : -1 != a.indexOf("m-fbar") && footerKefu() } var reset = 0, surplusHeight = 0, pageId = 0, checkEnd = !1, scrollTop = 0, clientHeight = 0, scrollHeight = 0, checkFirstLoad = 0, screenHeight = 0, slideAutoIndex = 0; $(function () { function c() { 0 == checkEnd && 0 == reset && (document.documentElement && document.documentElement.scrollTop ? scrollTop = document.documentElement.scrollTop : document.body && (scrollTop = document.body.scrollTop), clientHeight = document.body.clientHeight && document.documentElement.clientHeight ? document.body.clientHeight < document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight : document.body.clientHeight > document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight, scrollHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight), scroll_Height = parseInt(scrollHeight) - surplusHeight, scrollTop + clientHeight >= scroll_Height && (reset = 1, document.getElementById("loading").style.display = "block", setTimeout(d, 500))) } function d() { $.ajax({ type: "post", url: "/Mobile/MAjax.ashx?action=GetLoadHtml&t=" + Math.random(), data: "pageId=" + pageId, beforeSend: function () { }, success: function (a) { var c = gav(a, "id"), d = gav(a, "content"); pageId = c, $("body").append(d), loadJs(d), -1 != d.indexOf('class="g-ft"') && (checkEnd = !0) }, complete: function () { document.getElementById("loading").style.display = "none", reset = 0 }, error: function () { } }) } function e() { 0 == reset && (document.documentElement && document.documentElement.scrollTop ? scrollTop = document.documentElement.scrollTop : document.body && (scrollTop = document.body.scrollTop), clientHeight = document.body.clientHeight && document.documentElement.clientHeight ? document.body.clientHeight < document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight : document.body.clientHeight > document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight, scrollHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight), 0 == checkFirstLoad && (screenHeight = scrollHeight, checkFirstLoad = 1, surplusHeight = screenHeight), scrollHeight >= 1.5 * screenHeight ? clearInterval(b) : (reset = 1, d())) } var b, a = '<div id="loading" class="loading"><div id="circularG"><div id="circularG_1" class="circularG"></div><div id="circularG_2" class="circularG"></div><div id="circularG_3" class="circularG"></div><div id="circularG_4" class="circularG"></div><div id="circularG_5" class="circularG"></div><div id="circularG_6" class="circularG"></div><div id="circularG_7" class="circularG"></div><div id="circularG_8" class="circularG"></div></div></div>'; $("body").append(a), b = setInterval(e, 0), window.onscroll = c });